set! browser.download.manager.showWhenStarting=false
set! browser.tabs.closeWindowWithLastTab=false
set! ui.key.contentAccess=0

set gui=none
set hintchars=asdfghjkl
set focuscontent
set nextpattern=\bnext\b,\bmore\b,next,^次(の)?ページ,\b次.*,→\b,^>$,^(>>|≫)$,^(>|≫),(>|≫)$
set previouspattern=\bprev|previous\b,prev,^前(の)?ページ,\b前.*,\b←,^<$,^(<<|≪)$,^(<|≪),(<|≪)$ 

let g:plugin_loader_roots="~/repos/vimperator-plugins"
let g:plugin_loader_plugins="_libly,tombloo,caret-hint,prevent-pseudo-domain"

nmap <C-j> <C-d>
nmap <C-k> <C-u>
nmap <C-t> :tabnew<CR>
nmap a :tombloo Link<CR>
nmap A <Nop>
nmap s :set<Space>complete=s<CR>:tabopen<Space>
nmap S :hbt<Space>
nmap o :set<Space>complete=l<CR>:open<Space>
nmap t :set<Space>complete=l<CR>:tabopen<Space>
nmap U :undo<Space>
nmap B :tabgroups<Space>switch<Space>
nnoremap j 5j
nnoremap k 5k
cmap <C-n> <Tab>
cmap <C-p> <S-Tab>
vmap P y<Esc><Esc>P

" http://d.hatena.ne.jp/eagletmt/20120104/1325627319
js <<EOM
mappings.addUserMap(
    [modes.COMMAND_LINE],
    ['<C-g>'],
    'Adjust height of completion list',
    function() {
        let list = commandline._completions.itemList;
        list._minHeight = 0;
        list._autoSize();
    }
);
EOM

" Firebug inspect mode hint
js <<EOM
hints.addMode('i', 'firebug inspect hint', function(elem){
    Firebug.toggleBar(true);
    Firebug.chrome.select(elem);
}, function() '//*');
EOM

" Hatena Bookmark
js <<EOM
if (typeof hBookmark != 'undefined') {
    liberator.globalVariables.hBookmark_shortcuts = {
        hintsAdd     : 'x',
        hintsComment : 'X',
        add          : ['x'],
        comment      : ['X'],
    };
    liberator.loadScript('chrome://hatenabookmark/content/vimperator/plugin/hatenabookmark.js', {__proto__: this});
}
EOM

" prevent hint hiding contents
hi HintElem background-color: rgba(255,255,0,0.5); color: black;

ignorekeys clear
ignorekeys add mail\\.google\\.com
ignorekeys add www\\.google\\.com/calendar/
ignorekeys add reader\\.livedoor\\.com/reader/

style chrome://* .statuspanel-label { display: none; }
