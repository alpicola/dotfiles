set! browser.download.manager.showWhenStarting=false
set! browser.tabs.closeWindowWithLastTab=false
set! ui.key.contentAccess=0

" set gui=none
set hintchars=asdfghjkl
set focuscontent
set nextpattern=\bnext\b,\bmore\b,next,^次(の)?ページ,\b次.*,→\b,^>$,^(>>|≫)$,^(>|≫),(>|≫)$
set previouspattern=\bprev|previous\b,prev,^前(の)?ページ,\b前.*,\b←,^<$,^(<<|≪)$,^(<|≪),(<|≪)$ 

let g:plugin_loader_roots="~/repos/vimperator-plugins"
let g:plugin_loader_plugins="_libly,tombloo,caret-hint,prevent-pseudo-domain,copy"

nnoremap ; :
nnoremap : ;
nnoremap <C-j> <C-d>
nnoremap <C-k> <C-u>
nnoremap <C-t> :tabnew<CR>
nnoremap <C-l> :nohlsearch<CR>
nnoremap a :tombloo Link<CR>
nnoremap A <Nop>
nnoremap s :set<Space>complete=s<CR>:tabopen<Space>
nnoremap S :hbt<Space>
nnoremap o :set<Space>complete=l<CR>:open<Space>
nnoremap t :set<Space>complete=l<CR>:tabopen<Space>
nnoremap U :undo<Space>
nnoremap B :tabgroups<Space>switch<Space>
nnoremap j 5j
nnoremap k 5k
cnoremap <C-n> <Tab>
cnoremap <C-p> <S-Tab>
nmap p <Nop>
vmap p <Nop>

" http://d.hatena.ne.jp/eagletmt/20120104/1325627319
js <<EOM
mappings.addUserMap(
    [modes.COMMAND_LINE],
    ['<C-g>'],
    'Adjust height of completion list',
    function() {
        let list = commandline._completions.itemList;
        list._minHeight = 0;
        list._autoSize();
    }
);
EOM

" copy.js
javascript <<EOM
  liberator.globalVariables.copy_templates = [
    { label: 'title',           value: '%TITLE%' },
    { label: 'plain',           value: '%TITLE% %URL%' },
    { label: 'anchor',          value: '<a href="%URL%">%TITLE%</a>' },
    { label: 'selanchor',       value: '<a href="%URL%" title="%TITLE%">%SEL%</a>' },
    { label: 'htmlblockquote',  value: '<blockquote cite="%URL%" title="%TITLE%">%HTMLSEL%</blockquote>' },
    { label: 'markdown',        value: '[%TITLE%](%URL%)' },
  ];
EOM

" Firebug inspect mode hint
js <<EOM
hints.addMode('i', 'firebug inspect hint', function(elem) {
    Firebug.toggleBar(true);
    Firebug.chrome.select(elem);
}, function() { return '//*' });
EOM

" Hatena Bookmark
" js <<EOM
" if (typeof hBookmark != 'undefined') {
"     liberator.globalVariables.hBookmark_shortcuts = {
"         hintsAdd     : 'x',
"         hintsComment : 'X',
"         add          : ['x'],
"         comment      : ['X'],
"     };
"     liberator.loadScript('chrome://hatenabookmark/content/vimperator/plugin/hatenabookmark.js', {__proto__: this});
" }
" EOM

" prevent hint hiding contents
hi HintElem background-color: rgba(255,255,0,0.5); color: black;

ignorekeys clear
ignorekeys add mail\\.google\\.com
ignorekeys add www\\.google\\.com/calendar/
ignorekeys add reader\\.livedoor\\.com/reader/

style chrome://* .statuspanel-label { display: none; }
